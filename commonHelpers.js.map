{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// библиотеки\nimport SimpleLightbox from 'simplelightbox';\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from \"axios\";\n\n// api-key 40999949-91c7d6cea5390f79fde95dcf3\n\nconst searchForm = document.querySelector('.search');\nconst searchInput = document.querySelector('.input');\nconst loaderContainer = document.querySelector('.loader-container');\nconst loader = document.querySelector('.loader');\n\nconst API_KEY = '40999949-91c7d6cea5390f79fde95dcf3';\n\nlet currentPage = 1;\nconst perPage = 40;\nlet searchQuery = '';\n\nfunction showLoader() {\n  loaderContainer.style.display = 'block';\n  loader.style.display = 'block';\n}\nfunction hideLoader() {\n  loaderContainer.style.display = 'none';\n  loader.style.display = 'none';\n}\n\nasync function searchImages(query, currentPage) {\n  query = searchQuery;\n\n  const requestParams = {\n    key: API_KEY,\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: perPage,\n  };\n  const searchParams = new URLSearchParams(requestParams);\n\n  showLoader();\n\n// function searchImages(query) {\n//   requestParams.q = query;\n\n//   showLoader();\n\n//   fetch(`https://pixabay.com/api/?${searchParams}`)\n//     .then(response => {\n//       hideLoader();\n\n//       if (!response.ok) {\n//         throw new Error(\n//           'Sorry, there are no images matching your search query. Please try again!'\n//         );\n//       }\n//       return response.json();\n//     })\n\n//     .then(({ hits }) => {\n//       const gallery = document.querySelector('.gallery');\n\n//       const lightbox = new SimpleLightbox('.gallery a', {\n//         captionDelay: 250,\n//         captionsData: 'alt',\n//         close: true,\n//       });\n\n//       gallery.innerHTML = '';\n\n//       gallery.innerHTML = hits.reduce(\n//         (html, image) =>\n//           html +\n//           `<a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n//             <img\n//                 class=\"gallery-image\"\n//                 src=\"${image.webformatURL}\"\n//                 alt=\"${image.tags}\"\n//             />\n//            <ul class=\"info-list\">\n//               <li class=\"info-item\">\n//                   <p class=\"info-title\">Likes</p>\n//                   <p class=\"info-value\">${image.likes}</p>\n//               </li>\n//               <li class=\"info-item\">\n//                   <p class=\"info-title\">Views</p>\n//                   <p class=\"info-value\">${image.views}</p>\n//               </li>\n//               <li class=\"info-item\">\n//                   <p class=\"info-title\">Comments</p>\n//                   <p class=\"info-value\">${image.comments}</p>\n//               </li>\n//               <li class=\"info-item\">\n//                   <p class=\"info-title\">Downloads</p>\n//                   <p class=\"info-value\">${image.downloads}</p>\n//               </li>\n//             </ul>\n//         </a>`,\n//         ''\n//       );\n\n//       lightbox.refresh();\n//     })\n//     .catch(error => {\n//       iziToast.error({\n//         title: 'Error',\n//         message: error.message,\n//         position: 'topRight',\n//       });\n//     });\n// }\n\n\n\n// searchForm.addEventListener('submit', event => {\n//   event.preventDefault();\n\n//   const searchQuery = searchInput.value.trim();\n//   currentPage = 1;\n//   loadMoreButton.style.display = 'none';\n//   searchImages(searchQuery, currentPage);\n//   searchForm.reset();\n// });\n}\n  \n\n\n// эту закоментированную функцию переделать\n// начинать с try { const response = await axios.get\n\n// LOAD MORE\n\nloadMoreButton.addEventListener('click', () => {\n  currentPage += 1;\n  searchImages(searchQuery, currentPage);\n});\n// там query, тут searchQuery"],"names":["loaderContainer","loader","API_KEY","currentPage","perPage","searchQuery","showLoader","searchImages","query","requestParams"],"mappings":"0uBASmB,SAAS,cAAc,SAAS,EAC/B,SAAS,cAAc,QAAQ,EACnD,MAAMA,EAAkB,SAAS,cAAc,mBAAmB,EAC5DC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAU,qCAEhB,IAAIC,EAAc,EAClB,MAAMC,EAAU,GAChB,IAAIC,EAAc,GAElB,SAASC,GAAa,CACpBN,EAAgB,MAAM,QAAU,QAChCC,EAAO,MAAM,QAAU,OACzB,CAMA,eAAeM,EAAaC,EAAOL,EAAa,CAG9C,MAAMM,EAAgB,CACpB,IAAKP,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMF,EACN,SAAUC,CACd,EACuB,IAAI,gBAAgBK,CAAa,EAEtDH,GAmFF,CASA,eAAe,iBAAiB,QAAS,IAAM,CAC7CH,GAAe,EACfI,EAAaF,EAAaF,CAAW,CACvC,CAAC"}